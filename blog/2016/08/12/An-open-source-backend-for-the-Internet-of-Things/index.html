<!--
                      _ _ _
   ___ _ __ _   _  __| (_) | ____ _
  / _ \ '__| | | |/ _` | | |/ / _` |
 |  __/ |  | |_| | (_| | |   < (_| |
  \___|_|   \__,_|\__,_|_|_|\_\__,_|
             a tiny software company

-->
<!DOCTYPE html>
<html lang="en-us" class="nojs">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The official Erudika blog - we write about backend and frontend technologies
					like Java and JavaScript, IoT, mobile and Para.">
    <meta name="author" content="erudika.com">
		<meta property="fb:app_id" content="119564591416126">
    
		<title>An open source backend for the Internet of Things | Erudika Blog</title>
		<meta name="description" content="Things — those small, connected devices are now part of our daily lives. As we transition our focus from mobile to broader IoT development, the need for reliable and open source backend systems increa">
<meta property="og:type" content="article">
<meta property="og:title" content="An open source backend for the Internet of Things">
<meta property="og:url" content="https://erudika.com/blog/2016/08/12/An-open-source-backend-for-the-Internet-of-Things/index.html">
<meta property="og:site_name" content="Erudika Blog">
<meta property="og:description" content="Things — those small, connected devices are now part of our daily lives. As we transition our focus from mobile to broader IoT development, the need for reliable and open source backend systems increa">
<meta property="og:image" content="https://www.erudika.com/assets/img/blogpost_media6.png">
<meta property="og:updated_time" content="2016-08-12T08:27:55.605Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="An open source backend for the Internet of Things">
<meta name="twitter:description" content="Things — those small, connected devices are now part of our daily lives. As we transition our focus from mobile to broader IoT development, the need for reliable and open source backend systems increa">
<meta name="twitter:image" content="https://www.erudika.com/assets/img/blogpost_media6.png">
<meta name="twitter:creator" content="@para_io">
<meta property="fb:app_id" content="119564591416126">
		
    <link rel="alternative" href="/blog/atom.xml" title="Erudika Blog" type="application/atom+xml">
		

		<link rel="canonical" href="https://erudika.com/blog" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,700" rel="stylesheet">
    <link href="/assets/css/main.css" rel="stylesheet">

		<script type="text/javascript">
			var host = "erudika.com";
			if ((host === window.location.host) && (window.location.protocol !== "https:"))
			window.location.protocol = "https";
		</script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

		<script type="application/ld+json">
			[{
			"@context": "http://schema.org",
			"@type": "Organization",
			"address": {
			"@type": "PostalAddress",
			"addressLocality": "Sofia, Bulgaria",
			"postalCode": "1618",
			"streetAddress": "4 Lerinska chuka Street"
			},
			"email": "contact(at)erudika.com",
			"vatID": "BG-200368755",
			"name": "Erudika",
			"telephone": "( 33 1) 42 68 53 00",
			"url": "http://www.erudika.com",
			"logo": "https://www.erudika.com/assets/img/erudika.png",
			"sameAs": [
			"https://www.facebook.com/erudika.llc",
			"https://twitter.com/erudika",
			"https://www.linkedin.com/company/erudika",
			"https://plus.google.com/+ErudikaLLC",
			"https://github.com/Erudika"
			]
			},
			{
			"@context": "http://schema.org",
			"@type": "Blog",
			"name": "Erudika | Blog",
			"url": "http://www.erudika.com/blog",
			"genre": "technology/technical writing",
			"headline": "An open source backend for the Internet of Things"
			}]
		</script>
  </head>

	<body>
		<div id="container">
			<div id="wrap">
				<header id="header">
					<div class="navbar navbar-default">
						<div class="container">
							<div class="navbar-header">
								<a class="navbar-brand" href="/">
									<img src="/assets/img/erudika.svg" width="256" height="66" alt="logo" class="erudika-logo"/>
								</a>
							</div>
							<ul class="nav navbar-nav navbar-right hidden-xs">
								<li class=""><a href="/blog"><span style="color: black;">Blog</span></a></li>
								<li class=""><a href="/#projects">Projects</a></li>
								<li class=""><a href="/#skills">Skills</a></li>
								<li class=""><a href="/#contact">Contact</a></li>
							</ul>
						</div>
					</div>
					
					<div id="banner" style="background: url('/assets/img/img8.jpg') center #000;
					 -webkit-background-size: cover; -moz-background-size: cover; background-size: cover;"></div>
					
					<div id="header-outer" class="outer">
						<div id="header-title" class="inner">
							<h1 id="logo-wrap">
								<span id="logo">Blog</span>
							</h1>
							
						</div>
					</div>
				</header>

				<div class="outer">
					<section id="main"><article id="post-An-open-source-backend-for-the-Internet-of-Things" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/08/12/An-open-source-backend-for-the-Internet-of-Things/" class="article-date">
  <time datetime="2016-08-12T08:01:00.000Z" itemprop="datePublished">12 Aug 2016</time>
</a>
    
  </div>
  <div class="article-inner">
    
		

    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      An open source backend for the Internet of Things
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Things</strong> — those small, connected devices are now part of our daily lives. As we transition our focus from mobile to broader IoT development, the need for reliable and open source backend systems increases. There are so many applications for IoT — smart thermostats, air conditioning controllers, DIY home automation systems based on Raspberry Pi and Arduino, to name a few. We were planning to add IoT support to Para for a while now but it was only after a fellow developer’s suggestion that we realized we should’ve done this sooner. </p>
<a id="more"></a>
<p><img src="https://www.erudika.com/assets/img/blogpost_media6.png" alt=""></p>
<p>There are several key players in terms of IoT cloud platforms, but we chose to focus on two — <strong>AWS</strong> and <strong>Azure</strong>. In Para <code>1.20.0</code> we’ve implemented basic support for both platforms which allows you to keep your devices in sync between your backend and the cloud. There’s a new object called <code>Thing</code> which holds all the information about your device — the state of the device, the security credentials for the cloud and other important data. When a <code>Thing</code> is created, Para automatically calls the cloud provider and sets it up, returning all the information you need to connect your device to that cloud. It can then start pushing state changes and messages to the cloud containing any sensory data or other data of interest. In the case of AWS, Para would check for state changes on every read request and in the case of Azure it runs a separate thread for listening to cloud-to-device messages and updates <code>Thing</code> objects in the background. If you prefer one of these two approaches, we’d love to hear your feedback. </p>
<p>Creating things from the Para API is really simple — you only need to configure your access keys for the cloud provider of your choice. Then you make a <code>POST</code> request:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">POST /v1/things</div><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;RPiThingy&quot;,</div><div class="line">  &quot;serviceBroker&quot;: &quot;AWS&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The <code>serviceBroker</code> switches between IoT service providers and can either be “AWS” or “Azure”. The request above will perform several tasks on AWS before it returns, it will:</p>
<ul>
<li>Create a device certificate</li>
<li>Create a device policy and attach it to the certificate above</li>
<li>Create a new thing (device) and attach it to the certificate above</li>
</ul>
<p>Finally, a new <code>Thing</code> object is created within Para. The returned JSON object contains the inlined certificate and private key which should be transferred to the physical device. Once it starts sending data to AWS using the MQTT protocol you can poll for device state changes by reading the <code>Thing</code> object:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GET /v1/things/myapp:664870213421895680</div></pre></td></tr></table></figure>
<p>AWS have what they call “device shadows” a persistent storage for device state which is useful for remembering what was the last state of the device if it ever got disconnected. Let’s assume that this shadow has been updated by our Raspberry Pi thingy and it set a <code>temp = 24</code> variable. Once we read object like we did above, it gets the latest state from AWS. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;id&quot;: &quot;664870213421895680&quot;,</div><div class="line">  &quot;timestamp&quot;: 1468601996535,</div><div class="line">  &quot;type&quot;: &quot;thing&quot;,</div><div class="line">  &quot;appid&quot;: &quot;myapp&quot;,</div><div class="line">  &quot;name&quot;: &quot;RPiThingy&quot;</div><div class="line">  &quot;serviceBroker&quot;: &quot;AWS&quot;,</div><div class="line">  &quot;deviceState&quot;: &#123;</div><div class="line">  	&quot;temp&quot;: 24</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If we make a change in our backend and change the <code>Thing</code> to have <code>temp = 26</code> then this change is automatically reflected on AWS and the shadow of the device is also updated.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">PATCH /v1/things/myapp:664870213421895680</div><div class="line">&#123;</div><div class="line">  &quot;deviceState&quot;: &#123;</div><div class="line">    &quot;temp&quot;: 26</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Summary-—-getting-started-with-Para-and-AWS-IoT"><a href="#Summary-—-getting-started-with-Para-and-AWS-IoT" class="headerlink" title="Summary — getting started with Para and AWS IoT"></a>Summary — getting started with Para and AWS IoT</h2><ol>
<li>Get an account from AWS and create a user with permissions to call the IoT API</li>
<li>Set the <code>para.aws_access_key</code> and <code>para.aws_secret_key</code> properties in your Para config file</li>
<li>Start the Para instance and create a <code>Thing</code> object through the API as shown above</li>
<li>Take note of the <code>deviceDetails</code> field returned by this request as it contains certificates for your device</li>
<li>Use the certificates to set up your device and connect it to AWS IoT</li>
<li>The <code>deviceState</code> field inside the Para <code>Thing</code> object is synced with the device shadow on AWS on every <code>GET</code> request</li>
<li>Update the deviceState from the Para API and it will be synced with the device shadow on AWS on every <code>PATCH</code> request.</li>
</ol>
<h2 id="Other-changes-since-1-20-and-plans-for-the-next-release"><a href="#Other-changes-since-1-20-and-plans-for-the-next-release" class="headerlink" title="Other changes since 1.20 and plans for the next release"></a>Other changes since <code>1.20</code> and plans for the next release</h2><p>We’ve released quite a few improvements in <code>1.19</code> like the implementation of “join-like” queries using the method <code>findLinkedObjects()</code> this allows you to search for objects within a set of linked objects, in a many-to-many relationship. This feature relies on the <code>nested</code> query in Elasticsearch. </p>
<p>Para now works with Microsoft accounts so you can authenticate users with valid Windows accounts. Additionally, we’ve added independent social sign in for apps with their own OAuth keys, meaning that each app in Para has its own private settings and these can contain security credentials for Facebook, Twitter, etc. This was not possible before for apps other than the root app. Hence, the new endpoint <code>/v1/_settings</code> was added for updating these new app settings. The full changelog can be found on <a href="https://github.com/Erudika/para/releases" target="_blank" rel="external">GitHub</a>.</p>
<p>For the next release we’re hoping to implement a new Cassandra <code>DAO</code>, which is now overdue. An interesting fact about Para is that it was originally implemented to only run on top of Cassandra as a database layer. This was back in days when Cassandra was below version 1.0 and had no official client library, instead we used the Hector client. Para is now database-agnostic but we really wanted to rewrite the original connector for Cassandra using the official Java drivers. </p>
<p><em>Have ideas for the next Para release? Chat with us <a href="https://gitter.im/Erudika/para" target="_blank" rel="external">on Gitter</a>!</em></p>

      
    </div>
    <div class="article-footer">
      <a data-url="https://erudika.com/blog/blog/2016/08/12/An-open-source-backend-for-the-Internet-of-Things/" data-id="civ02vozp00010k4sz0o0m4xw" class="article-share-link">Share</a>
      
				<a href="https://twitter.com/albogdano">
					<img class="img-circle" src="https://www.gravatar.com/avatar/6888890e3e742a7c7357a4c74be405b8?s=60" width="30" height="30" alt="author"/>&nbsp; Alex B.
				</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/devices/">devices</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/iot/">iot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/para/">para</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/release/">release</a></li></ul>

    </div>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/blog/2016/06/09/Building-the-stack-from-scratch-with-Angular-2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Building the stack from scratch with Angular 2</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
	<div class="fb-comments" data-href="https://erudika.com/blog/blog/2016/08/12/An-open-source-backend-for-the-Internet-of-Things/" data-numposts="5"></div>
</section>
</section>
					
						<aside id="sidebar" >
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents
			
				<a href="/blog/atom.xml" title="RSS Feed" class="right"><i class="fa fa-rss"></i></a>
			
		</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2016/08/12/An-open-source-backend-for-the-Internet-of-Things/">An open source backend for the Internet of Things</a>
          </li>
        
          <li>
            <a href="/blog/2016/06/09/Building-the-stack-from-scratch-with-Angular-2/">Building the stack from scratch with Angular 2</a>
          </li>
        
          <li>
            <a href="/blog/2016/06/01/jPrime-roundup-Para-client-iOS-Swift/">jPrime roundup, Para client for iOS and Swift</a>
          </li>
        
          <li>
            <a href="/blog/2016/03/25/Para-Web-Console-the-admin-UI-for-your-backend/">Para Web Console - the admin UI for your backend</a>
          </li>
        
          <li>
            <a href="/blog/2016/03/06/Para-v1-18-released-new-site-and-jPrime/">Para v1.18 released, new site and jPrime</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/API/" style="font-size: 10px;">API</a> <a href="/blog/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/blog/tags/baas/" style="font-size: 10px;">baas</a> <a href="/blog/tags/backend/" style="font-size: 13.33px;">backend</a> <a href="/blog/tags/devices/" style="font-size: 10px;">devices</a> <a href="/blog/tags/frameworks/" style="font-size: 10px;">frameworks</a> <a href="/blog/tags/frontend/" style="font-size: 10px;">frontend</a> <a href="/blog/tags/general/" style="font-size: 10px;">general</a> <a href="/blog/tags/ios/" style="font-size: 10px;">ios</a> <a href="/blog/tags/iot/" style="font-size: 10px;">iot</a> <a href="/blog/tags/jprime/" style="font-size: 13.33px;">jprime</a> <a href="/blog/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/blog/tags/ng-admin/" style="font-size: 10px;">ng-admin</a> <a href="/blog/tags/para/" style="font-size: 20px;">para</a> <a href="/blog/tags/release/" style="font-size: 16.67px;">release</a> <a href="/blog/tags/swift/" style="font-size: 10px;">swift</a> <a href="/blog/tags/tutorial/" style="font-size: 10px;">tutorial</a> <a href="/blog/tags/typescript/" style="font-size: 10px;">typescript</a>
    </div>
  </div>

  

	<div>
		<div id="search-form-wrap">
			<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://erudika.com/blog"></form>
		</div>
	</div>
	<br><br>
	<div class="text-center">
		<small><i class="fa fa-cc"></i> Images taken from <a href="http://nos.twnsnd.co" target="_blank">New Old Stock</a>.</small>
	</div>
</aside>
					
				</div>
				<footer>
	
	<div class="container">
		<div class="row">
			<div class=" columns">
				<div class="col-xs-6">
					Hosted on <a href="https://github.com/Erudika/erudika.github.io"><i class="fa fa-github fa-lg"></i> GitHub</a>
				</div>
				<div class="col-xs-6 text-right">
					Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
				</div>
			</div>
		</div>
	</div>
</footer>
			</div>
			
<!-- Facebook SDK -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=119564591416126";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- End Facebook SDK -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script>
			if (!Modernizr.svg) { $("img.erudika-logo").attr("src", "/assets/img/erudika.png"); }
</script>

  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>

		</div>

		<!-- Google Analytics	 -->
		
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-648525-7', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


	</body>
</html>