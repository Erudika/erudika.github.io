---
import BaseLayout from "../../layouts/BaseLayout.astro";
import BlogCard from "../../components/BlogCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .map((post) => ({
    title: post.data.title,
    excerpt: post.data.excerpt,
    date: post.data.date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "2-digit"
    }),
    tags: post.data.tags,
    href: `/blog/${post.slug}`
  }));
---

<BaseLayout
  title="Erudika Blog"
  description="Release notes, architecture deep dives, and backend insights from Erudika."
  canonical="https://erudika.com/blog"
>
  <section class="py-16">
    <div class="section-shell">
      <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">Blog</p>
      <h1 class="mt-3 text-4xl font-semibold text-slate-900">Engineering notes and product updates</h1>
      <p class="mt-4 max-w-2xl text-lg text-slate-600">
        Long-form posts about Para, Scoold, and the infrastructure that powers them.
      </p>
      <div class="mt-10 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
        {posts.map((post) => (
          <BlogCard {...post} />
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
