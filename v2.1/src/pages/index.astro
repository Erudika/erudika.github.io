---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import BlogCard from "../components/BlogCard.astro";
import MetricCard from "../components/MetricCard.astro";
import marketing from "../data/marketing-foundation.json";
import { getCollection } from "astro:content";

const { hero, projectHighlights, proofPoints, quickJumpChips, trustRail } = marketing;

const blogTeasers = (await getCollection("blog"))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 2)
  .map((post) => ({
    title: post.data.title,
    excerpt: post.data.excerpt,
    date: post.data.date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "2-digit"
    }),
    tags: post.data.tags,
    href: `/blog/${post.slug}`
  }));
---

<BaseLayout
  title="Erudika | A tiny software company"
  description="Erudika builds Para, Scoold, and managed cloud services that keep your stack boring-fast."
  canonical="https://erudika.com"
>
  <section class="hero-grid border-b border-slate-200 py-16">
    <div class="section-shell grid gap-12 lg:grid-cols-[1.1fr_0.9fr]">
      <div class="space-y-8">
        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">{hero.eyebrow}</p>
        <div class="space-y-4">
          <h1 class="text-4xl font-semibold leading-tight text-slate-900 sm:text-5xl">{hero.title}</h1>
          <p class="text-lg text-slate-600">{hero.subtitle}</p>
        </div>
        <div class="flex flex-wrap gap-3">
          {hero.badges.map((badge) => (
            <div class="rounded-full border border-indigo-200 bg-indigo-50 px-4 py-2 text-xs font-semibold text-indigo-700">
              {badge.label}
              <span class="block text-[11px] font-normal text-indigo-500">{badge.description}</span>
            </div>
          ))}
        </div>
        <div class="flex flex-wrap gap-4">
          <a href={hero.primaryCta.href} class="btn btn-primary text-white">
            {hero.primaryCta.label}
          </a>
          <a href={hero.secondaryCta.href} class="btn btn-ghost border border-slate-300">
            {hero.secondaryCta.label}
          </a>
        </div>
        <div class="flex flex-wrap gap-3">
          {quickJumpChips.map((chip) => (
            <a href={chip.href} class="chip">{chip.label}</a>
          ))}
        </div>
      </div>

      <div class="flex items-center">
        <div class="glass-panel w-full rounded-3xl p-8 shadow-soft">
          <div class="text-xs font-semibold uppercase tracking-widest text-slate-500">{hero.media.headline}</div>
          <p class="mt-3 text-lg font-semibold text-slate-900">{hero.media.description}</p>
          <div class="mt-6 flex items-end gap-2">
            {hero.media.sparkline.map((point) => (
              <div class="w-full rounded-full bg-indigo-200" style={`height: ${point / 2}px`}></div>
            ))}
          </div>
          <div class="mt-6 text-sm text-slate-600">Astro + Bun builds keep sites snappy and low-latency.</div>
        </div>
      </div>
    </div>
  </section>

  <section id="projects" class="py-16">
    <div class="section-shell">
      <div class="flex flex-wrap items-end justify-between gap-6">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">Projects</p>
          <h2 class="mt-3 text-3xl font-semibold text-slate-900">Flagship products, tuned for backend teams</h2>
          <p class="mt-3 max-w-2xl text-slate-600">
            Para, Scoold, and our managed cloud services help teams ship backend features without rewriting their stack.
          </p>
        </div>
        <a href="/projects" class="text-sm font-semibold text-indigo-700">View all projects →</a>
      </div>
      <div class="mt-10 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
        {projectHighlights.map((project) => (
          <ProjectCard
            name={project.name}
            tagline={project.tagline}
            category={project.category}
            cta={project.cta}
            signal={project.signal}
            logo={`/old-website-assets/img/${project.id === "scoold" ? "scoold_logo.png" : project.id === "para" ? "para_logo.png" : "para_cloud.png"}`}
          />
        ))}
      </div>
    </div>
  </section>

  <section class="border-t border-slate-200 bg-white py-16">
    <div class="section-shell grid gap-10 lg:grid-cols-[0.8fr_1.2fr]">
      <div>
        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">Proof points</p>
        <h2 class="mt-3 text-3xl font-semibold text-slate-900">Small team. Enterprise outcomes.</h2>
        <p class="mt-3 text-slate-600">
          We are a tiny company with outsized impact because everything we build is performance-first and support-driven.
        </p>
      </div>
      <div class="grid gap-4 sm:grid-cols-3">
        {proofPoints.metrics.map((metric) => (
          <MetricCard label={metric.label} value={metric.value} description={metric.description} />
        ))}
      </div>
    </div>
    <div class="section-shell mt-10 grid gap-6 md:grid-cols-2">
      {proofPoints.testimonials.map((testimonial) => (
        <div class="rounded-2xl border border-slate-200 bg-slate-50 p-6">
          <p class="text-sm text-slate-700">“{testimonial.quote}”</p>
          <div class="mt-4 text-xs font-semibold uppercase tracking-widest text-slate-500">{testimonial.author}</div>
          <div class="text-sm text-slate-600">{testimonial.role}</div>
        </div>
      ))}
    </div>
  </section>

  <section id="blog" class="py-16">
    <div class="section-shell">
      <div class="flex flex-wrap items-end justify-between gap-6">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">Blog</p>
          <h2 class="mt-3 text-3xl font-semibold text-slate-900">Latest shipping notes and deep dives</h2>
          <p class="mt-3 max-w-2xl text-slate-600">
            Release notes, architecture write-ups, and tooling insights from the Erudika team.
          </p>
        </div>
        <a href="/blog" class="text-sm font-semibold text-indigo-700">Visit the blog →</a>
      </div>
      <div class="mt-10 grid gap-6 md:grid-cols-2">
        {blogTeasers.map((post) => (
          <BlogCard {...post} />
        ))}
      </div>
    </div>
  </section>

  <section id="support" class="border-t border-slate-200 bg-white py-16">
    <div class="section-shell grid gap-10 lg:grid-cols-[1.1fr_0.9fr]">
      <div>
        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">Support</p>
        <h2 class="mt-3 text-3xl font-semibold text-slate-900">Priority support that ships with your roadmap</h2>
        <p class="mt-3 text-slate-600">
          SLA-backed response times, architecture reviews, and help with migrations. We cover GMT/EET and US hours.
        </p>
        <div class="mt-6 flex flex-wrap gap-4">
          <a href="/support" class="btn btn-primary text-white">View support plans</a>
          <a href="mailto:contact@erudika.com" class="btn btn-ghost border border-slate-300">Email support</a>
        </div>
      </div>
      <div class="rounded-3xl border border-slate-200 bg-slate-50 p-8">
        <div class="text-xs font-semibold uppercase tracking-widest text-slate-500">Contact</div>
        <div class="mt-4 space-y-2 text-sm text-slate-700">
          <div>Erudika LTD.</div>
          <div>{trustRail.address}</div>
          <div>VAT {trustRail.vat}</div>
        </div>
        <div class="mt-6 space-y-2 text-sm text-slate-700">
          <div>Email: <a class="text-indigo-700" href={`mailto:${trustRail.contact.email}`}>{trustRail.contact.email}</a></div>
          <div>Phone: {trustRail.contact.phone}</div>
          <div>
            Status: <a class="text-indigo-700" href={trustRail.status.href}>{trustRail.status.state}</a>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
